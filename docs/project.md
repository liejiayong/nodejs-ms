# 项目说明

## 业务逻辑

### 登录模块

访问h5时， 在顶场app.vue设置拦截，对url-query和storage做了token拦截，若存在则设置token，优化登录步骤

### 授权模块

微信授权格式

```js
  const url = `http://www.ysdwat.com/wap/?${URL_TOKEN}=${encodeURIComponent(token)}#/auth/wechat?${urlQuery}`
```

### 支付
 - 订单支付方式（我是买家-立即支付）：pc：微信扫码、余额支付； wap：支付宝h5 、 微信公众号、余额支付
 - 购买商品支付方式：pc：微信扫码； wap：支付宝h5 、 微信公众号

### return code

```js
  10001	参数异常
  20001	用户不存在
  20002	用户被禁止登录
  20003	旧密码错误，请重新输入
  20004	旧密码不能与新密码一致
  20005	用户名已存在
  20006	注册失败，请稍后再试
  20007	查找的用户不存在
  20008	用户余额不足
  20009	提现申请失败，请稍后再试
  20010	游戏信息不存在
  20011	消息不存在
  20012	收藏不存在
  20013	不能删除别人收藏的商品
  20014	您已经收藏过该商品了
  20015	大区信息不存在
  20016	服务器信息不存在
  20017	身份证号已存在
  20018	您已经实名认证过了，无需重复提交
  20019	您已经提交过身份认证信息了，请耐心等待审核
  20020	您已经绑定过银行卡了
  20021	您已经提交过银行卡绑定信息了，请耐心等待审核
  20022	银行卡账号已存在
  20023	请先进行实名认证后，再绑定银行卡
  20024	请先进行实名认证和绑定银行卡，再进行提现
  20025	短信验证码错误
  20026	密码错误，请重新输入
  30001	商品不存在
  30002	商品库存不足
  30003	商品非上架状态
  30004	发布商品异常，请稍后再试
  30005	库存不足，请选择其他商品
  30006	商品正在交易中，请选择其他商品
  30007	请先进行身份认证再发布商品
  30008	请先进行银行卡绑定再发布商品
  30009	超过发布商品日限制
  30010	找不到账号信息
  30011	不能帮别人付商品保证金
  30012	商品已经处于上架状态
  30013	不能上架/下架别人的商品
  30014	请先支付保证金后再上架商品
  30015	该商品不能自助上架/下架
  30016	商品已经处于下架状态
  30017	商品未通过审核，无法缴纳保证金
  30018	找不到保证金数据
  30019	保证金状态为已缴纳才允许退回
  30020	当前保证金不满足退回条件
  40001	订单不存在
  40002	不能购买自己发布的商品哦~
  40003	下单异常，请稍后再试
  40004	请先进行身份认证再提交订单
  40005	不能查看别人的订单详情
  40006	不能查看别人的订单支付结果
  40007	订单已被取消，请重新下单
  40008	订单尚未支付哦
  40009	不能发别人订单的货哦
  40010	订单不是待发货状态
  40011	订单不是已发货状态
  40012	不能确认别人订单的货哦
  40013	确认收货失败，请稍后再试
  40014	服务器繁忙，确认收货失败
  40015	发货失败，请稍后再试
  40016	服务器繁忙，发货失败
  40017	当前订单状态不允许取消
  40018	装备类型才允许取消
  40019	服务器繁忙，支付失败
  40020	不能发送别人订单的联系消息
  40021	超过发送订单消息的限制
  40022	不能查看别人订单的联系消息
  40023	服务器繁忙，支付失败，请稍后再试
  * 40024	请在微信浏览器内打开支付网页
  * 40025	微信支付授权失败，请稍后再试
  * 40026	请先绑定微信再进行公众号支付
  * 40027	该订单已经支付过了，请勿重复支付
  * 40028	订单状态错误，该订单不是待支付状态
  * 40029	请勿支付别人的订单
  * 50001	缺少Token令牌
  * 50002	Token令牌错误
  * 50003	Token令牌已过期
  * 50004	用户不存在
  50005	未开启黑名单功能
  50006	Token处于黑名单中
```